---
// Offline indicator component that shows when user loses connection
---

<div id="offline-indicator" class="offline-indicator">
  <div class="offline-indicator-content">
    <div class="offline-indicator-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="1" y1="1" x2="23" y2="23"></line>
        <path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"></path>
        <path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"></path>
        <path d="M10.71 5.05A16 16 0 0 1 22.58 9"></path>
        <path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"></path>
        <path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path>
        <line x1="12" y1="20" x2="12.01" y2="20"></line>
      </svg>
    </div>
    <div class="offline-indicator-text">
      <span class="offline-indicator-title">You're Offline</span>
      <span class="offline-indicator-subtitle">Check your internet connection</span>
    </div>
    <button id="offline-retry-button" class="offline-retry-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="23 4 23 10 17 10"></polyline>
        <polyline points="1 20 1 14 7 14"></polyline>
        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
      </svg>
      <span>Retry</span>
    </button>
  </div>
</div>

<div id="online-indicator" class="online-indicator">
  <div class="online-indicator-content">
    <div class="online-indicator-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
    </div>
    <span class="online-indicator-text">Back Online</span>
  </div>
</div>

<script>
  const offlineIndicator = document.getElementById('offline-indicator');
  const onlineIndicator = document.getElementById('online-indicator');
  const retryButton = document.getElementById('offline-retry-button');

  // Show offline indicator
  function showOfflineIndicator() {
    if (offlineIndicator) {
      offlineIndicator.classList.add('show');
      // Update body margin to account for the banner
      document.body.style.paddingTop = '70px';
    }
  }

  // Hide offline indicator
  function hideOfflineIndicator() {
    if (offlineIndicator) {
      offlineIndicator.classList.remove('show');
      document.body.style.paddingTop = '0';
    }
  }

  // Show online indicator temporarily
  function showOnlineIndicator() {
    if (onlineIndicator) {
      onlineIndicator.classList.add('show');
      setTimeout(() => {
        onlineIndicator.classList.remove('show');
      }, 3000);
    }
  }

  // Listen for offline event
  window.addEventListener('offline', () => {
    console.log('Connection lost');
    showOfflineIndicator();
  });

  // Listen for online event
  window.addEventListener('online', () => {
    console.log('Connection restored');
    hideOfflineIndicator();
    showOnlineIndicator();
  });

  // Check initial connection status
  if (!navigator.onLine) {
    showOfflineIndicator();
  }

  // Retry button click
  if (retryButton) {
    retryButton.addEventListener('click', () => {
      window.location.reload();
    });
  }
</script>

<style>
  /* Offline Indicator */
  .offline-indicator {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 9999;
    transform: translateY(-100%);
    transition: transform 0.3s ease;
  }

  .offline-indicator.show {
    transform: translateY(0);
  }

  .offline-indicator-content {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    padding: 1rem 1.5rem;
    background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .offline-indicator-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .offline-indicator-text {
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
  }

  .offline-indicator-title {
    font-size: 0.95rem;
    font-weight: 700;
    line-height: 1.2;
  }

  .offline-indicator-subtitle {
    font-size: 0.8rem;
    opacity: 0.9;
  }

  .offline-retry-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0;
  }

  .offline-retry-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.4);
  }

  .offline-retry-btn:active {
    transform: scale(0.98);
  }

  /* Online Indicator */
  .online-indicator {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 9999;
    transform: translateX(150%);
    transition: transform 0.3s ease;
  }

  .online-indicator.show {
    transform: translateX(0);
  }

  .online-indicator-content {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.875rem 1.25rem;
    background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
    color: white;
    border-radius: 12px;
    box-shadow: 0 4px 16px rgba(22, 163, 74, 0.3);
  }

  .online-indicator-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    flex-shrink: 0;
  }

  .online-indicator-text {
    font-size: 0.95rem;
    font-weight: 600;
  }

  /* Mobile Responsive */
  @media (max-width: 600px) {
    .offline-indicator-content {
      flex-direction: column;
      gap: 0.75rem;
      padding: 1rem;
      text-align: center;
    }

    .offline-indicator-text {
      align-items: center;
    }

    .offline-retry-btn {
      width: 100%;
      justify-content: center;
    }

    .online-indicator {
      top: 0.5rem;
      right: 0.5rem;
      left: 0.5rem;
    }

    .online-indicator-content {
      justify-content: center;
    }
  }

  /* Smooth body padding transition */
  body {
    transition: padding-top 0.3s ease;
  }
</style>
