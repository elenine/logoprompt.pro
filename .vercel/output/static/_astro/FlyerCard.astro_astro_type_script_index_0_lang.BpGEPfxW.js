import{S as u,s as w}from"./socialCopy.Dmq-SWp-.js";import{i as C,a as L,D as v}from"./referral.B2sjhuBK.js";document.addEventListener("DOMContentLoaded",()=>{const y=document.querySelectorAll(".flyer-card"),{storageKey:g}=u;C();let s=v;L().then(t=>{s=t});const p=new URLSearchParams(window.location.search),m=p.get("search")==="true"||p.get("share")==="true";if(m)try{localStorage.setItem(g,"true")}catch{}let l=m;if(!l)try{l=localStorage.getItem(g)==="true"}catch{}function f(t,o){const{hashtags:i,callToAction:e,siteUrl:a}=u,r=[...i];if(o){const d=`#${o.replace(/\s+/g,"")}`;r.unshift(d)}const n=r.join(" "),c=o?`model: ${o}`:"";return`prompt: ${t}

${c}

${n}

${e.wantMore} ${e.visit} ${a}`}y.forEach(t=>{const o=t.getAttribute("data-prompt")||"",i=t.getAttribute("data-image-url")||"",e=t.getAttribute("data-model")||"",a=t.querySelector(".copy-prompt-btn"),r=t.querySelector(".copy-image-btn");a?.addEventListener("click",async n=>{n.stopPropagation();try{const c=l?f(o,e):o;await navigator.clipboard.writeText(c),h(a),w()&&window.open(s,"_blank")}catch(c){console.error("Failed to copy prompt:",c)}}),r?.addEventListener("click",async n=>{n.stopPropagation();try{const d=await(await fetch(i)).blob(),S=await b(d);await navigator.clipboard.write([new ClipboardItem({"image/png":S})]),h(r),w()&&window.open(s,"_blank")}catch(c){console.error("Failed to copy image:",c)}})});function h(t){t.classList.add("copied"),setTimeout(()=>{t.classList.remove("copied")},2e3)}async function b(t){return new Promise((o,i)=>{const e=new Image;e.onload=()=>{const a=document.createElement("canvas");a.width=e.width,a.height=e.height;const r=a.getContext("2d");if(!r){i(new Error("Could not get canvas context"));return}r.drawImage(e,0,0),a.toBlob(n=>{n?o(n):i(new Error("Could not convert to PNG"))},"image/png")},e.onerror=()=>i(new Error("Could not load image")),e.src=URL.createObjectURL(t)})}});
